<div class="course-info" >
  <div class="inner" [ngClass]="{ materalsNotActive: selectedTab === 1 || selectedTab === 3 || selectedTab === 4 }">
    <div class="image">
      <!--      <i class="pi pi-chevron-left" (click)="back()"></i>-->
      <img class="main-image" [src]="response.image" alt="" />
    </div>
    <div class="back">
      <p>{{ response.name }}</p>
    </div>
    <div class="tabs">
      <div
        class="item"
        [ngClass]="{ selected: selectedTab === 1 }"
        (click)="selectedTab = 1"
      >
        <p>{{ "About" | translate }}</p>
      </div>
      <div
        class="item"
        [ngClass]="{ selected: selectedTab === 2 }"
        (click)="selectedTab = 2"
      >
        <p>{{ "Materials" | translate }}</p>
      </div>
      <div
        class="item"
        [ngClass]="{ selected: selectedTab === 3 }"
        (click)="selectedTab = 3"
      >
        <p>{{ "Students" | translate }}</p>
      </div>
      <div
        class="item"
        [ngClass]="{ selected: selectedTab === 4 }"
        (click)="selectedTab = 4"
      >
        <p>{{ "Rating" | translate }}</p>
      </div>
    </div>
    <div class="about-tabs-content" *ngIf="selectedTab === 1">
      <div class="lang-ed">
        <div class="language">
          <label>{{ "Educator" | translate }}</label>
          <p class="ed-link" (click)="showEducator = true">
            {{ response.educator.firstName + " " + response.educator.lastName }}
            <i class="pi pi-angle-right"></i>
          </p>
        </div>
        <div class="language">
          <label>{{ "Language" | translate }}</label>
          <p>{{ response.language }}</p>
        </div>
      </div>
      <div class="description">
        <p>{{ response.description }}</p>
      </div>
    </div>
    <div class="materials-tabs-content" *ngIf="selectedTab === 2">
      <div class="topic" *ngFor="let topic of response.topics">
        <p class="top-name">{{ topic.name }}</p>
        <div class="sub-topics">
          <div class="sub-item" *ngFor="let sub of topic.subtopics" #subTopic>
            <p class="sub-name">{{ sub.name }}</p>
            <div class="mats">
              <div class="mat-item" *ngFor="let mat of sub.files">
                <a href="{{ mat.url }}" target="_blank" class="mat-name">
                  <img src="mat-link.svg" alt="" />
                  {{ mat.name }}
                </a>
                <div class="mat-lang">
                  <img [src]="mat.icon" alt="" />
                  <p>{{ mat.language }}</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="about-tabs-content members" *ngIf="selectedTab === 3">
      <div class="list">
        <div class="item" *ngFor="let item of members">
          <div class="col">
            <label>{{ "Name" | translate }}</label>
            <p>{{ item.fullName }}</p>
          </div>
          <div class="col">
            <label>{{ "Email" | translate }}</label>
            <p>{{ item.username }}</p>
          </div>
          <div class="col">
            <label>{{ "Status" | translate }}</label>
            <p [ngStyle]="{ color: item.accepted ? '#19C51F' : '#DB3AA9' }">
              {{
                item.accepted ? ("Active" | translate) : ("Pending" | translate)
              }}
            </p>
          </div>
        </div>
      </div>
    </div>
    <div class="rating-wrapper" *ngIf="selectedTab===4">
      <div class="total">
        <h4>{{ response.rating }}</h4>
        <p-rating [(ngModel)]="response.rating" [disabled]="true" />
        <p>{{ total }} {{ "ratings" | translate }}</p>
      </div>
      <div class="items">
        <div class="item" *ngFor="let item of ratings">
          <div class="star">
            <span>{{ item.rating }}</span>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="15"
              height="15"
              viewBox="0 0 15 15"
              fill="none"
            >
              <path
                d="M7.01566 0.863052C7.04487 0.80404 7.08999 0.754366 7.14593 0.719637C7.20188 0.684907 7.26641 0.666504 7.33225 0.666504C7.3981 0.666504 7.46263 0.684907 7.51857 0.719637C7.57451 0.754366 7.61964 0.80404 7.64884 0.863052L9.18847 3.98162C9.28989 4.18688 9.43961 4.36447 9.62478 4.49913C9.80994 4.6338 10.025 4.72152 10.2515 4.75477L13.6947 5.25865C13.7599 5.2681 13.8212 5.29562 13.8717 5.33809C13.9221 5.38057 13.9596 5.4363 13.98 5.49899C14.0004 5.56168 14.0028 5.62883 13.987 5.69283C13.9712 5.75683 13.9379 5.81514 13.8907 5.86116L11.4006 8.28591C11.2364 8.44593 11.1135 8.64347 11.0426 8.86152C10.9716 9.07956 10.9547 9.31158 10.9934 9.5376L11.5812 12.9634C11.5927 13.0286 11.5857 13.0958 11.5609 13.1572C11.5361 13.2186 11.4945 13.2718 11.4409 13.3107C11.3874 13.3496 11.3239 13.3727 11.2579 13.3773C11.1918 13.3819 11.1258 13.3678 11.0673 13.3367L7.98943 11.7184C7.78662 11.6119 7.56099 11.5563 7.33192 11.5563C7.10286 11.5563 6.87722 11.6119 6.67441 11.7184L3.59717 13.3367C3.53873 13.3676 3.47279 13.3815 3.40685 13.3768C3.3409 13.3721 3.27759 13.349 3.22412 13.3102C3.17065 13.2713 3.12917 13.2182 3.10439 13.1569C3.07961 13.0956 3.07253 13.0286 3.08396 12.9634L3.67115 9.53827C3.70994 9.31214 3.69313 9.07998 3.62219 8.8618C3.55124 8.64362 3.42828 8.44597 3.26391 8.28591L0.773856 5.86183C0.726263 5.81586 0.692538 5.75745 0.676521 5.69325C0.660505 5.62906 0.662841 5.56165 0.683264 5.49871C0.703687 5.43578 0.741375 5.37984 0.792036 5.33728C0.842697 5.29472 0.904293 5.26724 0.969808 5.25798L4.4123 4.75477C4.63908 4.72178 4.85445 4.63417 5.03987 4.49949C5.22529 4.36481 5.3752 4.18709 5.47671 3.98162L7.01566 0.863052Z"
                fill="#99A1AF"
                stroke="#99A1AF"
                stroke-width="1.33301"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
          </div>
          <div class="st">
            <div class="filled" [ngStyle]="{ width: item.percentage + '%'}"></div>
          </div>
          <div class="nums">
            <p><span>{{ item.count }}</span> {{ "students" | translate }}</p>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div
    class="right"
    [ngClass]="{ notMaterial: selectedTab === 1 || selectedTab === 3 || selectedTab === 4, material: selectedTab === 2 }"
  >
    <div class="educator-block" *ngIf="showEducator && selectedTab === 1 ">
      <div class="educator-info">
        <div class="item">
          <div class="row">
            <div class="image-name">
              <div class="image">
                <img
                  *ngIf="response.educator.profileImage"
                  [src]="response.educator.profileImage"
                  alt=""
                />
                <img
                  *ngIf="!response.educator.profileImage"
                  src="unknown-profile.svg"
                  alt=""
                />
              </div>
              <p>
                {{
                  response.educator.firstName + " " + response.educator.lastName
                }}
              </p>
            </div>
            <i
              class="pi pi-times"
              style="cursor: pointer"
              (click)="showEducator = false"
            ></i>
          </div>
          <div class="rows">
            <a href="mailto:{{ response.educator.userName }}" class="row email">
              <svg
                width="15"
                height="13"
                viewBox="0 0 15 13"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M15 2C15 1.175 14.325 0.5 13.5 0.5H1.5C0.675 0.5 0 1.175 0 2V11C0 11.825 0.675 12.5 1.5 12.5H13.5C14.325 12.5 15 11.825 15 11V2ZM13.5 2L7.5 5.75L1.5 2H13.5ZM13.5 11H1.5V3.5L7.5 7.25L13.5 3.5V11Z"
                  fill="#90928D"
                />
              </svg>
              <p>{{ response.educator.userName }}</p>
            </a>
            <a
              href="tel:+995{{ response.educator.phoneNumber }}"
              class="row email"
            >
              <svg
                width="10"
                height="13"
                viewBox="0 0 10 13"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M4 2.83333H6M7.85733 1H2.14267C1.512 1 1 1.49256 1 2.1V10.9C1 11.5074 1.512 12 2.14267 12H7.85733C8.48867 12 9 11.5074 9 10.9V2.1C9 1.49256 8.48867 1 7.85733 1Z"
                  stroke="#90928D"
                  stroke-width="1.5"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </svg>
              <p>
                {{ response.educator.phoneNumber }}
              </p>
            </a>
          </div>
        </div>
      </div>
    </div>
    <div class="materials-info" *ngIf="selectedTab === 2">
      <div class="tabs">
        <div
          class="item"
          [ngClass]="{ selected: selectedMatTab === 1 }"
          (click)="selectedMatTab = 1"
        >
          <p>{{ "Content" | translate }}</p>
        </div>
        <div
          class="item"
          [ngClass]="{ selected: selectedMatTab === 2 }"
          (click)="selectedMatTab = 2"
        >
          <p>{{ "All files" | translate }}</p>
        </div>
      </div>

      <div class="content-tab" *ngIf="selectedMatTab === 1">
        <div class="search">
          <div class="search-block">
            <i class="pi pi-search"></i>
            <input
              type="text"
              [(ngModel)]="searchTerm"
              placeholder="{{ 'Search' | translate }}..."
              (input)="filterTopics()"
            />
          </div>
        </div>

        <div class="materials-tabs-content menu">
          <div
            class="topic"
            *ngFor="let topic of filteredTopics; let i = index"
          >
            <div
              class="top-name"
              style="cursor: pointer"
              (click)="toggleExpander(i)"
            >
              <svg
                *ngIf="expanderStates[i] === 'collapsed'"
                xmlns="http://www.w3.org/2000/svg"
                width="10"
                height="6"
                viewBox="0 0 10 6"
                fill="none"
              >
                <path
                  d="M9.77989 0.22944C9.6389 0.08253 9.44772 4.28555e-07 9.24837 4.11127e-07C9.04902 3.937e-07 8.85783 0.0825299 8.71685 0.22944L4.99546 4.10846L1.27408 0.229439C1.13229 0.0866925 0.94238 0.00770633 0.745263 0.00949159C0.548145 0.0112768 0.359584 0.0936915 0.220195 0.238985C0.0808063 0.384278 0.00174188 0.580825 2.9066e-05 0.786293C-0.00168375 0.991761 0.0740923 1.18971 0.211038 1.33751L4.46394 5.77056C4.60492 5.91747 4.79611 6 4.99546 6C5.19481 6 5.386 5.91747 5.52698 5.77056L9.77988 1.33751C9.92082 1.19055 10 0.991267 10 0.783473C10 0.57568 9.92082 0.376394 9.77989 0.22944Z"
                  fill="#13170C"
                />
              </svg>
              <svg
                *ngIf="expanderStates[i] === 'expanded'"
                xmlns="http://www.w3.org/2000/svg"
                width="10"
                height="6"
                viewBox="0 0 10 6"
                fill="none"
              >
                <path
                  d="M0.220114 5.77056C0.361097 5.91747 0.552284 6 0.751633 6C0.950982 6 1.14217 5.91747 1.28315 5.77056L5.00454 1.89154L8.72592 5.77056C8.86771 5.91331 9.05762 5.99229 9.25474 5.99051C9.45186 5.98872 9.64042 5.90631 9.7798 5.76102C9.91919 5.61572 9.99826 5.41918 9.99997 5.21371C10.0017 5.00824 9.92591 4.81029 9.78896 4.66249L5.53606 0.22944C5.39508 0.0825303 5.20389 9.09877e-07 5.00454 8.75021e-07C4.80519 8.40166e-07 4.614 0.0825301 4.47302 0.22944L0.220115 4.66249C0.0791748 4.80945 -8.75755e-07 5.00873 -9.12086e-07 5.21653C-9.48418e-07 5.42432 0.0791746 5.62361 0.220114 5.77056Z"
                  fill="#13170C"
                />
              </svg>
              <p>{{ topic.name }}</p>
            </div>
            <div class="sub-topics" [@expanderAnimation]="expanderStates[i]">
              <div
                class="sub-item"
                *ngFor="let sub of topic.subtopics"
                (click)="goToSubTopic(sub)"
              >
                <p class="sub-name">{{ sub.name }}</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="content-tab" *ngIf="selectedMatTab === 2">
        <div class="search">
          <div class="search-block">
            <i class="pi pi-search"></i>
            <input
              type="text"
              [(ngModel)]="fileText"
              placeholder="{{ 'Search' | translate }}..."
              (input)="filterFiles()"
            />
          </div>
        </div>
        <div class="files">
          <div class="item" *ngFor="let file of filteredFiles">
            <a href="{{ file.url }}" target="_blank" class="mat-name">
              <img src="mat-link.svg" alt="" />
              {{ file.name }}
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
