<div class="wrapper">
  <div class="inputs">
    <div class="input-item">
      <label for="name">{{ "File title" | translate }}</label>
      <input type="text" id="name" [(ngModel)]="request.name" />
    </div>

    <div class="input-item file-input" style="width: 100%; position: relative">
      <label>{{ "Upload file" | translate }}</label>
      <label class="file-label" for="file1">
        @if (!request.file.fileLoading) {
          <span class="inp-bl">
            <p>{{ "Drag and drop or click to upload" | translate }}</p>
          </span>
        } @else if (request.file.fileLoading) {
          <span class="inp-bl">
            <i class="pi pi-spin pi-spinner"></i>
          </span>
        }
      </label>
      <input
        id="file1"
        type="file"
        [(ngModel)]="request.file.fakeFile"
        (change)="getImage($event)"
        multiple="false"
        accept="image/*"
        style="
          display: block;
          position: absolute;
          bottom: 0;
          opacity: 0;
          height: 100%;
        "
      />
    </div>
    <div class="images">
      @if (request.fakeFile) {
        <div
          class="image"
          style="
            display: flex;
            align-items: center;
            gap: 8px;
            justify-content: space-between;
          "
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="15"
            height="19"
            viewBox="0 0 15 19"
            fill="none"
          >
            <path
              d="M8.0617 0.750488H4.32891C2.64145 0.750488 1.79862 0.750488 1.27431 1.30393C0.75 1.85738 0.75 2.74704 0.75 4.52827V13.9727C0.75 15.7539 0.75 16.6436 1.27431 17.197C1.79862 17.7505 2.64145 17.7505 4.32891 17.7505H9.69726C11.3847 17.7505 12.2276 17.7505 12.7519 17.197C13.2762 16.6436 13.2762 15.7539 13.2762 13.9727V6.25471C13.2762 5.86938 13.2762 5.67577 13.2082 5.50293C13.1402 5.3301 13.0113 5.19221 12.7519 4.91927L9.32685 1.30393C9.06738 1.03004 8.93854 0.894044 8.7748 0.822266C8.61017 0.750488 8.42675 0.750488 8.0617 0.750488Z"
              stroke="#5A4BEA"
              stroke-width="1.5"
            />
            <path
              d="M7.9082 0.750488V4.52827C7.9082 5.41888 7.9082 5.86371 8.17036 6.14043C8.43251 6.41715 8.85393 6.41715 9.69766 6.41715H13.2766"
              stroke="#5A4BEA"
              stroke-width="1.5"
            />
          </svg>
          <p>
            {{ getFileName(request.fakeFile.name) }} <span></span>
            {{ request.fakeFile.fileMB }}MB
          </p>
          <div class="remove" style="cursor: pointer" (click)="removeFile()">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="14"
              height="14"
              viewBox="0 0 14 14"
              fill="none"
            >
              <path
                d="M6.575 7.975L1.675 12.875C1.49167 13.0583 1.25833 13.15 0.975 13.15C0.691667 13.15 0.458333 13.0583 0.275 12.875C0.0916663 12.6917 0 12.4583 0 12.175C0 11.8917 0.0916663 11.6583 0.275 11.475L5.175 6.575L0.275 1.675C0.0916663 1.49167 0 1.25833 0 0.975C0 0.691667 0.0916663 0.458333 0.275 0.275C0.458333 0.0916663 0.691667 0 0.975 0C1.25833 0 1.49167 0.0916663 1.675 0.275L6.575 5.175L11.475 0.275C11.6583 0.0916663 11.8917 0 12.175 0C12.4583 0 12.6917 0.0916663 12.875 0.275C13.0583 0.458333 13.15 0.691667 13.15 0.975C13.15 1.25833 13.0583 1.49167 12.875 1.675L7.975 6.575L12.875 11.475C13.0583 11.6583 13.15 11.8917 13.15 12.175C13.15 12.4583 13.0583 12.6917 12.875 12.875C12.6917 13.0583 12.4583 13.15 12.175 13.15C11.8917 13.15 11.6583 13.0583 11.475 12.875L6.575 7.975Z"
                fill="#4C4C54"
              />
            </svg>
          </div>
        </div>
        <div class="st">
          <div
            class="filled"
            [ngStyle]="{ width: subscription.usedPercentage + '%' }"
          ></div>
        </div>
        <div class="total">
          <p>{{ subscription.used.toFixed(2) }}MB/{{ subscription.maxFileStorage }}MB</p>
          <span>{{ "See plans that offer more" | translate }}</span>
        </div>
      }
    </div>
    <div class="input-item">
      <label for="url">{{ "File URL" | translate }}</label>
      <input type="text" id="url" [(ngModel)]="request.url" />
    </div>
    <div class="input-item">
      <label for="enable">{{ "File Language" | translate }}</label>
      <p-dropdown
        [style]="{ width: '100%', height: '40px' }"
        [options]="languages"
        optionLabel="name"
        optionValue="id"
        appendTo="body"
        [(ngModel)]="request.systemLanguageId"
        id="enable"
      ></p-dropdown>
    </div>
    <div class="dates">
      <div class="selection">
        <p-checkbox [(ngModel)]="enableSelection" [binary]="true" id="enableSelection"/>
        <label style="cursor: pointer" for="enableSelection" (click)="enableSelection = !enableSelection">Schedule availability </label>
      </div>
      <div class="row" style="margin-top: 18px;" *ngIf="enableSelection">
        <div class="input-item">
          <label>{{ "Start date" | translate }}</label>
          <div class="input">
            <p-datepicker
              [style]="{ width: '100%' }"
              [(ngModel)]="startDate"
              [showTime]="true"
              appendTo="body"
            />
            <div class="icon">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="17"
                height="16"
                viewBox="0 0 17 16"
                fill="none"
              >
                <path
                  d="M1.64111 7.82074C1.64111 5.11335 1.64111 3.7593 2.48255 2.91858C3.32327 2.07715 4.67732 2.07715 7.3847 2.07715H10.2565C12.9639 2.07715 14.3179 2.07715 15.1587 2.91858C16.0001 3.7593 16.0001 5.11335 16.0001 7.82074V9.25664C16.0001 11.964 16.0001 13.3181 15.1587 14.1588C14.3179 15.0002 12.9639 15.0002 10.2565 15.0002H7.3847C4.67732 15.0002 3.32327 15.0002 2.48255 14.1588C1.64111 13.3181 1.64111 11.964 1.64111 9.25664V7.82074Z"
                  stroke="#838E99"
                  stroke-width="1.5"
                />
                <path
                  d="M5.23077 2.07692V1M12.4103 2.07692V1M2 5.66667H15.641"
                  stroke="#838E99"
                  stroke-width="1.5"
                  stroke-linecap="round"
                />
                <path
                  d="M13.1283 11.4101C13.1283 11.6005 13.0527 11.7831 12.918 11.9177C12.7834 12.0524 12.6008 12.128 12.4104 12.128C12.22 12.128 12.0374 12.0524 11.9027 11.9177C11.7681 11.7831 11.6924 11.6005 11.6924 11.4101C11.6924 11.2196 11.7681 11.037 11.9027 10.9024C12.0374 10.7677 12.22 10.6921 12.4104 10.6921C12.6008 10.6921 12.7834 10.7677 12.918 10.9024C13.0527 11.037 13.1283 11.2196 13.1283 11.4101ZM13.1283 8.53826C13.1283 8.72867 13.0527 8.91129 12.918 9.04593C12.7834 9.18057 12.6008 9.25621 12.4104 9.25621C12.22 9.25621 12.0374 9.18057 11.9027 9.04593C11.7681 8.91129 11.6924 8.72867 11.6924 8.53826C11.6924 8.34785 11.7681 8.16524 11.9027 8.03059C12.0374 7.89595 12.22 7.82031 12.4104 7.82031C12.6008 7.82031 12.7834 7.89595 12.918 8.03059C13.0527 8.16524 13.1283 8.34785 13.1283 8.53826ZM9.53858 11.4101C9.53858 11.6005 9.46294 11.7831 9.3283 11.9177C9.19366 12.0524 9.01104 12.128 8.82063 12.128C8.63022 12.128 8.44761 12.0524 8.31297 11.9177C8.17832 11.7831 8.10268 11.6005 8.10268 11.4101C8.10268 11.2196 8.17832 11.037 8.31297 10.9024C8.44761 10.7677 8.63022 10.6921 8.82063 10.6921C9.01104 10.6921 9.19366 10.7677 9.3283 10.9024C9.46294 11.037 9.53858 11.2196 9.53858 11.4101ZM9.53858 8.53826C9.53858 8.72867 9.46294 8.91129 9.3283 9.04593C9.19366 9.18057 9.01104 9.25621 8.82063 9.25621C8.63022 9.25621 8.44761 9.18057 8.31297 9.04593C8.17832 8.91129 8.10268 8.72867 8.10268 8.53826C8.10268 8.34785 8.17832 8.16524 8.31297 8.03059C8.44761 7.89595 8.63022 7.82031 8.82063 7.82031C9.01104 7.82031 9.19366 7.89595 9.3283 8.03059C9.46294 8.16524 9.53858 8.34785 9.53858 8.53826ZM5.94884 11.4101C5.94884 11.6005 5.8732 11.7831 5.73855 11.9177C5.60391 12.0524 5.4213 12.128 5.23089 12.128C5.04048 12.128 4.85786 12.0524 4.72322 11.9177C4.58858 11.7831 4.51294 11.6005 4.51294 11.4101C4.51294 11.2196 4.58858 11.037 4.72322 10.9024C4.85786 10.7677 5.04048 10.6921 5.23089 10.6921C5.4213 10.6921 5.60391 10.7677 5.73855 10.9024C5.8732 11.037 5.94884 11.2196 5.94884 11.4101ZM5.94884 8.53826C5.94884 8.72867 5.8732 8.91129 5.73855 9.04593C5.60391 9.18057 5.4213 9.25621 5.23089 9.25621C5.04048 9.25621 4.85786 9.18057 4.72322 9.04593C4.58858 8.91129 4.51294 8.72867 4.51294 8.53826C4.51294 8.34785 4.58858 8.16524 4.72322 8.03059C4.85786 7.89595 5.04048 7.82031 5.23089 7.82031C5.4213 7.82031 5.60391 7.89595 5.73855 8.03059C5.8732 8.16524 5.94884 8.34785 5.94884 8.53826Z"
                  fill="#838E99"
                />
              </svg>
            </div>
          </div>
        </div>
        <div class="input-item">
          <label>{{ "End date" | translate }}</label>
          <div class="input">
            <p-datepicker
              [style]="{ width: '100%' }"
              [(ngModel)]="endDate"
              appendTo="body"
              [showTime]="true"
            />
            <div class="icon">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="17"
                height="16"
                viewBox="0 0 17 16"
                fill="none"
              >
                <path
                  d="M1.64111 7.82074C1.64111 5.11335 1.64111 3.7593 2.48255 2.91858C3.32327 2.07715 4.67732 2.07715 7.3847 2.07715H10.2565C12.9639 2.07715 14.3179 2.07715 15.1587 2.91858C16.0001 3.7593 16.0001 5.11335 16.0001 7.82074V9.25664C16.0001 11.964 16.0001 13.3181 15.1587 14.1588C14.3179 15.0002 12.9639 15.0002 10.2565 15.0002H7.3847C4.67732 15.0002 3.32327 15.0002 2.48255 14.1588C1.64111 13.3181 1.64111 11.964 1.64111 9.25664V7.82074Z"
                  stroke="#838E99"
                  stroke-width="1.5"
                />
                <path
                  d="M5.23077 2.07692V1M12.4103 2.07692V1M2 5.66667H15.641"
                  stroke="#838E99"
                  stroke-width="1.5"
                  stroke-linecap="round"
                />
                <path
                  d="M13.1283 11.4101C13.1283 11.6005 13.0527 11.7831 12.918 11.9177C12.7834 12.0524 12.6008 12.128 12.4104 12.128C12.22 12.128 12.0374 12.0524 11.9027 11.9177C11.7681 11.7831 11.6924 11.6005 11.6924 11.4101C11.6924 11.2196 11.7681 11.037 11.9027 10.9024C12.0374 10.7677 12.22 10.6921 12.4104 10.6921C12.6008 10.6921 12.7834 10.7677 12.918 10.9024C13.0527 11.037 13.1283 11.2196 13.1283 11.4101ZM13.1283 8.53826C13.1283 8.72867 13.0527 8.91129 12.918 9.04593C12.7834 9.18057 12.6008 9.25621 12.4104 9.25621C12.22 9.25621 12.0374 9.18057 11.9027 9.04593C11.7681 8.91129 11.6924 8.72867 11.6924 8.53826C11.6924 8.34785 11.7681 8.16524 11.9027 8.03059C12.0374 7.89595 12.22 7.82031 12.4104 7.82031C12.6008 7.82031 12.7834 7.89595 12.918 8.03059C13.0527 8.16524 13.1283 8.34785 13.1283 8.53826ZM9.53858 11.4101C9.53858 11.6005 9.46294 11.7831 9.3283 11.9177C9.19366 12.0524 9.01104 12.128 8.82063 12.128C8.63022 12.128 8.44761 12.0524 8.31297 11.9177C8.17832 11.7831 8.10268 11.6005 8.10268 11.4101C8.10268 11.2196 8.17832 11.037 8.31297 10.9024C8.44761 10.7677 8.63022 10.6921 8.82063 10.6921C9.01104 10.6921 9.19366 10.7677 9.3283 10.9024C9.46294 11.037 9.53858 11.2196 9.53858 11.4101ZM9.53858 8.53826C9.53858 8.72867 9.46294 8.91129 9.3283 9.04593C9.19366 9.18057 9.01104 9.25621 8.82063 9.25621C8.63022 9.25621 8.44761 9.18057 8.31297 9.04593C8.17832 8.91129 8.10268 8.72867 8.10268 8.53826C8.10268 8.34785 8.17832 8.16524 8.31297 8.03059C8.44761 7.89595 8.63022 7.82031 8.82063 7.82031C9.01104 7.82031 9.19366 7.89595 9.3283 8.03059C9.46294 8.16524 9.53858 8.34785 9.53858 8.53826ZM5.94884 11.4101C5.94884 11.6005 5.8732 11.7831 5.73855 11.9177C5.60391 12.0524 5.4213 12.128 5.23089 12.128C5.04048 12.128 4.85786 12.0524 4.72322 11.9177C4.58858 11.7831 4.51294 11.6005 4.51294 11.4101C4.51294 11.2196 4.58858 11.037 4.72322 10.9024C4.85786 10.7677 5.04048 10.6921 5.23089 10.6921C5.4213 10.6921 5.60391 10.7677 5.73855 10.9024C5.8732 11.037 5.94884 11.2196 5.94884 11.4101ZM5.94884 8.53826C5.94884 8.72867 5.8732 8.91129 5.73855 9.04593C5.60391 9.18057 5.4213 9.25621 5.23089 9.25621C5.04048 9.25621 4.85786 9.18057 4.72322 9.04593C4.58858 8.91129 4.51294 8.72867 4.51294 8.53826C4.51294 8.34785 4.58858 8.16524 4.72322 8.03059C4.85786 7.89595 5.04048 7.82031 5.23089 7.82031C5.4213 7.82031 5.60391 7.89595 5.73855 8.03059C5.8732 8.16524 5.94884 8.34785 5.94884 8.53826Z"
                  fill="#838E99"
                />
              </svg>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
  <div class="btns">
    <button (click)="ref.close()">{{ "Cancel" | translate }}</button>
    <button class="save" (click)="save()" [disabled]="loading">{{ "Save" | translate }}
    <i class="pi pi-spin pi-spinner" *ngIf="loading"></i>
    </button>
  </div>
</div>
